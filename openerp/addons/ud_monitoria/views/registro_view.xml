<?xml version="1.0" encoding="UTF-8"?>

<openerp>
    <data>
        <!-- REGISTRO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_registro_tree_view">
            <field name="name">Registros Semestrais</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.registro</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_registro_tree_view">
            <field name="name">ud.monitoria.registro.tree</field>
            <field name="model">ud.monitoria.registro</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Registros" colors="blue:is_active == True">
                    <field name="semestre"/>
                    <field name="vagas_bolsistas"/>
                    <field name="data_i_frequencia"/>
                    <field name="intervalo_frequencia"/>
                    <!--<field name="relatorio_discentes_ids"/> -->
                    <!--<field name="desligamentos_ids"/> -->
                    <!--<field name="outros_eventos_ids"/> -->
                    <field name="is_active"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_registro_form_view">
            <field name="name">ud.monitoria.registro.form</field>
            <field name="model">ud.monitoria.registro</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Registro" version="7.0">
                    <header>
                        <button name="botao_ativar_registro" string="Reativar" groups="ud_monitoria.group_ud_monitoria_administrador"
                                type="object" attrs="{'invisible': ['|', ('is_active', '=', True), ('id', '=', False)]}"/>
                        <button name="botao_desativar_registro" string="Desativar" type="object"
                                attrs="{'invisible': ['|', ('is_active', '=', False), ('id', '=', False)]}"/>
                    </header>
                    <group string="Informações Básicas" col="4">
                        <field name="semestre" colspan="2" class="semestre" attrs="{'readonly': [('id', '!=', False)]}"
                               placeholder="Ex.: 2016.1"/>
                        <field name="vagas_bolsistas" colspan="2"/>
                        <field name="data_i_frequencia" colspan="2" attrs="{'readonly': [('id', '!=', False)]}"/>
                        <field name="intervalo_frequencia" colspan="2" attrs="{'readonly': [('id', '!=', False)]}"/>
                        <field name="tipo_media" colspan="2" attrs="{'readonly': [('is_active', '=', False)]}"/>
                        <field name="media_minima" colspan="2" attrs="{'readonly': [('is_active', '=', False)]}"/>
                        <field name="is_active" colspan="2"/>
                    </group>
                    <notebook attrs="{'invisible': [('id', '=', False)]}">
                        <page string="Solicitações de Disciplinas (Demanda)">
                            <field name="demanda_ids"/>
                            <p>
                                Ao criar um novo Processo Seletivo, as disciplinas das solicitações ativas serão
                                automaticamente inseridas. Caso haja disciplinas repetidas entre solicitações, essa será
                                adicionada com as configurações de sua primeira ocorrência.
                            </p>
                        </page>
                        <page string="Relatórios Finais">
                            <field name="relatorio_discentes_ids"/>
                            <p>
                                Essa tabela mostra o status atual dos discentes ativos informando se possuem, ou não,
                                alguma pendência, tal como submissão de frequência e relatório final.
                            </p>
                        </page>
                        <page string="Desligamentos">
                            <field name="desligamentos_ids" nolabel="1"/>
                            <p>
                                Mostra todos os desligamentos ocorridos no semestre.
                            </p>
                        </page>
                        <page string="Eventos">
                            <field name="outros_eventos_ids" nolabel="1"
                                   attrs="{'readonly': [('is_active', '=', False)]}">
                                <tree edit="false" delete="false" colors="red:state=='novo';blue:state=='visto'">
                                    <field name="create_date"/>
                                    <field name="name"/>
                                    <field name="responsavel_id"/>
                                    <field name="envolvidos_ids"/>
                                    <field name="state"/>
                                    <button name="botao_visualizar" states="novo" string="Visualizado" type="object"
                                            icon="gtk-apply"/>
                                </tree>
                            </field>
                            <p>
                                Mostra os eventos gerais ocorridos no semestre, tal como alterações de bolsa dos
                                discentes.
                            </p>
                        </page>
                        <page string="Modelos de documentos">
                            <group col="10">
                                <field name="modelo_certificado_id" colspan="4"/>
                                <field name="modelo_relatorio_id" colspan="4"/>
                                <button name="botao_resetar_modelos" string="Resetar Modelos" type="object" colspan="2"
                                        groups="ud_monitoria.group_ud_monitoria_administrador"
                                        confirm="Realmente deseja restaurar os campos originais dos modelos?"/>
                            </group>
                        </page>
                        <page string="Alteração de Bolsas"
                              attrs="{'invisible': [('relatorio_discentes_ids', '=', [])]}">
                            <button name='%(ud_monitoria.action_ud_monitoria_adicionar_bolsa_wizard_form_view)d'
                                    type='action' string='Vincular Bolsa'/>
                        </page>
                    </notebook>
                    <field name="id" context="{'reg_id': id}"/>
                </form>
            </field>
        </record>

        <!-- EVENTO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_evento_tree_view">
            <field name="name">Eventos Ocorridos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.evento</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_evento_tree_view">
            <field name="name">ud.monitoria.evento.tree</field>
            <field name="model">ud.monitoria.evento</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Eventos" colors="red:state=='novo';blue:state=='visto'">
                    <field name="create_date"/>
                    <field name="name"/>
                    <field name="responsavel_id"/>
                    <field name="envolvidos_ids"/>
                    <field name="state"/>
                    <button name="botao_visualizar" states="novo" string="Visualizado" type="object"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_evento_form_view">
            <field name="name">ud.monitoria.evento.form</field>
            <field name="model">ud.monitoria.evento</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Evento" version="7.0">
                    <header>
                        <button name="botao_visualizar" states="novo" string="Visualizado" type="object"
                                class="oe_highlight"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <group col="4">
                        <field name="name" colspan="2"/>
                        <field name="create_date" colspan="2"/>
                        <field name="responsavel_id" colspan="2"
                               context="{'form_view_ref': 'ud_monitoria.ud_employee_info_basicas_form_view'}"/>
                    </group>
                    <separator string="Descrição"/>
                    <field name="descricao"/>
                    <group string="Envolvidos">
                        <field name="envolvidos_ids" nolabel="1"
                               context="{'form_view_ref': 'ud_monitoria.ud_employee_info_basicas_form_view'}"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- RELATÓRIO FINAL DOS DISCENTES -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_relatorio_final_disc_tree_view">
            <field name="name">Relatórios de Status (Discentes)</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.relatorio.final.disc</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_relatorio_final_disc_tree_view">
            <field name="name">ud.monitoria.relatorio.final.disc.tree</field>
            <field name="model">ud.monitoria.relatorio.final.disc</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Relatório Final" colors="red:is_active==True;blue:is_active==False">
                    <field name="discente_id"/>
                    <field name="relatorio"/>
                    <field name="meses_frequencia_ids"/>
                    <field name="write_date"/>
                    <field name="is_active" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_relatorio_final_disc_form_view">
            <field name="name">ud.monitoria.relatorio.final.disc.form</field>
            <field name="model">ud.monitoria.relatorio.final.disc</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Relatórios finais" version="7.0">
                    <group col="4">
                        <field name="discente_id" colspan="2"/>
                        <field name="write_date" colspan="2"/>
                        <field name="relatorio" colspan="2"/>
                    </group>
                    <group string="Entrega das frequências">
                        <field name="meses_frequencia_ids" nolabel="1"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- RELATÓRIO FINAL DOS DISCENTES: MÊS -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_rfd_mes_tree_view">
            <field name="name">Relatórios de Status (Discentes)/Mês</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.rfd.mes</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_rfd_mes_tree_view">
            <field name="name">ud.monitoria.rfd.mes.tree</field>
            <field name="model">ud.monitoria.rfd.mes</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Mêses" colors="red:regular==False;blue:regular==True">
                    <field name="mes"/>
                    <field name="regular"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_frd_mes_form_view">
            <field name="name">ud.monitoria.rfd.mes.form</field>
            <field name="model">ud.monitoria.rfd.mes</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Mês">
                    <field name="name" invisible="1"/>
                    <group col="4">
                        <field name="mes" colspan="2" attrs="{'readonly': [('name', '!=', False)]}"/>
                        <field name="regular" colspan="2"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- DESLIGAMENTOS -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_desligamento_tree_view">
            <field name="name">Desligamentos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.desligamento</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_desligamento_tree_view">
            <field name="name">ud.monitoria.desligamento.tree</field>
            <field name="model">ud.monitoria.desligamento</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Desligamentos" colors="red:state=='novo'">
                    <!--<field name="orientador_solicitante_id"/> -->
                    <!--<field name="discente_id"/> -->
                    <field name="disciplina_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_desligamento_form_view">
            <field name="name">ud.monitoria.desligamento.form</field>
            <field name="model">ud.monitoria.desligamento</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Desligamento" version="7.0">
                    <header>
                        <button name="botao_confirmar" string="Confirmar" type="object"
                                class="oe_highlight" states="novo"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <group colspan="4" col="4">
                        <!--<field name="orientador_solicitante_id"/> -->
                        <!--<field name="discente_id"/> -->
                        <field name="disciplina_id"/>
                        <field name="registro_id"/>
                    </group>
                    <separator string="Justificativa"/>
                    <field name="justificativa"/>
                    <separator string="Informações Adicionais"/>
                    <field name="info_adicionais"/>
                </form>
            </field>
        </record>

        <!-- DISCIPLINA: SOLICITAÇÃO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_solicitacao_disciplina_tree_view">
            <field name="name">Disciplinas de Solicitação</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.solicitacao.disciplina</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_solicitacao_disciplina_tree_view">
            <field name="name">ud.monitoria.solicitacao.disciplina.tree</field>
            <field name="model">ud.monitoria.solicitacao.disciplina</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Disciplinas" colors="blue:is_active==True">
                    <field name="disciplina_id"/>
                    <field name="curso_id"/>
                    <field name="orientador_id"/>
                    <field name="monitor_s_bolsa"/>
                    <field name="tutor_s_bolsa"/>
                    <field name="is_active"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_solicitacao_disciplina_form_view">
            <field name="name">ud.monitoria.solicitacao.disciplina.form</field>
            <field name="model">ud.monitoria.solicitacao.disciplina</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Disciplina" version="7.0">
                    <div attrs="{'invisible': [('curso_id', '!=', False)]}">
                        <b>Obs.:</b>
                        Se o curso desejado não estiver na lista, provavelmente ele não tenha sido ofertado, não esteja
                        ativo, não foi registrado ou o campo "Modalidade" não foi devidamente preenchido. Para resolver
                        esse problema, entre em contato com o administrador do sistema.
                    </div>
                    <group col="4">
                        <field name="curso_id" colspan="2" on_change="onchange_curso(curso_id)"/>
                        <field name="disciplina_id" colspan="2" domain="[('id', 'in', [])]"
                               on_change="onchange_disciplina(curso_id, disciplina_id)"/>
                        <field name="siape" colspan="2" on_change="onchange_siape(siape)"/>
                        <field name="orientador_id" colspan="2"
                               context="{'form_view_ref': 'ud_monitoria.ud_employee_info_basicas_form_view'}"/>
                        <field name="data_inicial" colspan="2"/>
                        <field name="data_final" colspan="2"/>
                        <field name="monitor_s_bolsa" colspan="2"/>
                        <field name="tutor_s_bolsa" colspan="2"/>
                        <field name="num_bolsas" colspan="2"/>
                        <field name="is_active" colspan="2"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- SOLICITAÇÃO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_solicitacao_tree_view">
            <field name="name">Solicitações</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.solicitacao</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_solicitacao_tree_view">
            <field name="name">ud.monitoria.solicitacao.tree</field>
            <field name="model">ud.monitoria.solicitacao</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Solicitações" colors="blue:is_active == True">
                    <field name="solicitante_id"/>
                    <field name="semestre_id"/>
                    <field name="disciplinas_ids"/>
                    <field name="is_active"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_solicitacao_form_view">
            <field name="name">ud.monitoria.solicitacao.form</field>
            <field name="model">ud.monitoria.solicitacao</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Solicitação" edit="false" version="7.0">
                    <header>
                        <button name="desativar" string="Concluir Solicitação" type="object"
                                attrs="{'invisible': [('is_active', '=', False)]}"
                                groups="ud_monitoria.group_ud_monitoria_coordenador"
                                confirm="Esta ação impedirá que as disciplinas dessa solicitação sejam incluídas automaticamente adicionadas em novos processos seletivos para seu semestre. Deseja continuar?"/>
                    </header>
                    <field name="is_active" invisible="1"/>
                    <group col="4" attrs="{'invisible': [('solicitante_id', '=', False)]}">
                        <field name="semestre_id" colspan="2"/>
                        <field name="solicitante_id" colspan="2"
                               context="{'form_view_ref': 'ud_monitoria.ud_employee_info_basicas_form_view'}"/>
                    </group>
                    <group string="Disciplinas" attrs="{'invisible': [('solicitante_id', '=', False)]}">
                        <field name="disciplinas_ids" nolabel="1"/>
                    </group>
                    <p attrs="{'invisible': [('solicitante_id', '!=', False)]}">
                        <strong>Atenção:</strong> No momento não será possível fazer a solicitação. Possivelmente seu login
                        não esteja vinculado a uma pessoa no núcleo ou possui vínculo com mais de uma.
                    </p>
                </form>
            </field>
        </record>
    </data>
</openerp>
