<?xml version="1.0" encoding="UTF-8"?>

<openerp>
    <data>
        <!-- DISCIPLINA: PROCESSO SELETIVO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_ps_disciplina_tree_view">
            <field name="name">Processo Seletivo: Disciplinas</field>
            <field name="res_model">ud.monitoria.ps.disciplina</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_ps_disciplina_tree_view">
            <field name="name">ud.monitoria.ps.disciplina.tree</field>
            <field name="model">ud.monitoria.ps.disciplina</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Disciplinas">
                    <field name="disciplina_id"/>
                    <field name="curso_id"/>
                    <field name="orientador_id"/>
                    <field name="data_inicial"/>
                    <field name="data_final"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_ps_disciplina_form_view">
            <field name="name">ud.monitoria.ps.disciplina.form</field>
            <field name="model">ud.monitoria.ps.disciplina</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Disciplina" version="7.0">
                    <div attrs="{'invisible': [('curso_id', '!=', False)]}">
                        <b>Obs.:</b>
                        Se o curso desejado não estiver na lista, provavelmente ele não tenha sido ofertado, não esteja
                        ativo,
                        não foi registrado ou o campo "Modalidade" não foi devidamente preenchido. Para resolver esse
                        problema,
                        entre em contato com o administrador do sistema.
                    </div>
                    <group col="4">
                        <field name="curso_id" colspan="2" on_change="onchange_curso(curso_id)"
                               options="{'create_edit': false, 'create': false}" placeholder="Seleção de Curso"/>
                        <field name="disciplina_id" colspan="2" domain="[('id', 'in', [])]"
                               placeholder="Seleção de Disciplina" options="{'create_edit': false, 'create': false}"
                               on_change="onchange_disciplina(curso_id, disciplina_id)"/>
                        <field name="siape" colspan="2" on_change="onchange_siape(siape)"
                               placeholder="Número do SIAPE"/>
                        <field name="orientador_id" colspan="2" options="{'no_open': true}"/>
                        <field name="data_inicial" colspan="2"/>
                        <field name="data_final" colspan="2"/>
                        <field name="monitor_s_bolsa" colspan="2"/>
                        <field name="tutor_s_bolsa" colspan="2"/>
                        <field name="num_bolsas" colspan="2"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- CRITÉRIO AVALIATIVO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_criterio_avaliativo_tree_view">
            <field name="name">Critério Avaliativo</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.criterio.avaliativo</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_criterio_avaliativo_tree_view">
            <field name="name">ud.monitoria.criterio.avaliativo.tree</field>
            <field name="model">ud.monitoria.criterio.avaliativo</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Critérios Avaliativos">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_criterio_avaliativo_form_view">
            <field name="name">ud.monitoria.criterio.avaliativo.form</field>
            <field name="model">ud.monitoria.criterio.avaliativo</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Critério Avaliativo" version="7.0">
                    <div>
                        <strong>Atenção:</strong> A presença do campo "Peso" não quer dizer que será adotado para o
                        cálculo da média final do discente. Isso irá depender exclusivamente das configurações adotadas
                        pela coordenação.
                    </div>
                    <group col="4">
                        <field name="name" colspan="2"/>
                        <field name="peso" colspan="2"/>
                    </group>
                    <separator string="Descrição"/>
                    <field name="descricao" nolabel="1"/>
                </form>
            </field>
        </record>

        <!-- PONTUAÇÃO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_pontuacao_tree_view">
            <field name="name">Pontuações</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.pontuacao</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_pontuacao_tree_view">
            <field name="name">ud.monitoria.pontuacao.tree</field>
            <field name="model">ud.monitoria.pontuacao</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Pontuações" create="false" delete="false" editable="bottom">
                    <field name="criterio_avaliativo_id"/>
                    <field name="pontuacao"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_pontuacao_form_view">
            <field name="name">ud.monitoria.pontuacao.form</field>
            <field name="model">ud.monitoria.pontuacao</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Pontuação" create="false" delete="false" version="7.0">
                    <group>
                        <field name="criterio_avaliativo_id"/>
                        <field name="pontuacao"/>
                    </group>
                    <separator string="Informações Adicionais"/>
                    <field name="info" nolabel="1"/>
                </form>
            </field>
        </record>

        <!-- PONTUAÇÃO: DISCIPLINA -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_pontuacoes_disciplina_tree_view">
            <field name="name">Pontuações de disciplina</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.pontuacoes.disciplina</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_pontuacoes_disciplina_tree_view">
            <field name="name">ud.monitoria.pontuacoes.disciplina.tree</field>
            <field name="model">ud.monitoria.pontuacoes.disciplina</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Pontuações de disciplinas" create="false" delete="false">
                    <field name="disciplina_id"/>
                    <field name="media_aritmetica"/>
                    <field name="media_ponderada"/>
                    <field name="pontuacoes_ids"/>
                    <field name="state"/>
                    <field name="bolsista" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_pontuacoes_disciplina_tree_view_coordenador">
            <field name="name">ud.monitoria.pontuacoes.disciplina.tree</field>
            <field name="model">ud.monitoria.pontuacoes.disciplina</field>
            <field name="inherit_id" ref="ud_monitoria_pontuacoes_disciplina_tree_view"/>
            <field name="groups_id" eval="[(6, 0, [ref('ud_monitoria.group_ud_monitoria_coordenador')]), (6, 0, [ref('ud_monitoria.group_ud_monitoria_administrador')])]"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="inside">
                    <button name="aprovar" states="analise" string="Aprovar" type="object" icon="gtk-apply"
                            confirm="Deseja aprovar o discente nessa disciplina?"/>
                    <button name="aprovar_s_bolsa" string="Aprovar sem bolsa" type="object" icon="terp-dolar_ok!"
                            attrs="{'invisible': ['|', ('state', '!=', 'analise'), ('bolsista', '=', False)]}"
                            confirm="Deseja aprovar o discente nessa disciplina como NÃO bolsista?"/>
                    <button name="reservar" states="analise" string="Cadastro de Reserva" icon="terp-personal+"
                            type="object" confirm="Deseja selecionar o discente atual para o cadastro de RESERVA?"/>
                    <button name="reprovar" states="analise" string="Reprovar" type="object"
                            icon="gtk-cancel" confirm="Deseja rerpovar o discente nessa disciplina?"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_pontuacoes_disciplina_form_view">
            <field name="name">ud.monitoria.pontuacoes.disciplina.form</field>
            <field name="model">ud.monitoria.pontuacoes.disciplina</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Pontuações de disciplina" version="7.0">
                    <group invisible="1">
                        <field name="state"/>
                        <field name="bolsista"/>
                        <field name="state"/>
                    </group>
                    <group col="4">
                        <field name="disciplina_id" colspan="4" readonly="1"/>
                        <field name="media_aritmetica" colspan="2"/>
                        <field name="media_ponderada" colspan="2"/>
                    </group>
                    <group string="Pontuações">
                        <field name="pontuacoes_ids" nolabel="1" on_change="onchange_pontuacoes(pontuacoes_ids)"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- ANEXOS -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_anexo_tree_view">
            <field name="name">Anexos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.anexo</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_anexo_tree_view">
            <field name="name">ud.monitoria.anexo.tree</field>
            <field name="model">ud.monitoria.anexo</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Anexos">
                    <field name="name" invisible="1"/>
                    <field name="arquivo" filename="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_anexo_form_view">
            <field name="name">ud.monitoria.anexo.form</field>
            <field name="model">ud.monitoria.anexo</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Anexo" version="7.0">
                    <field name="name" invisible="1"/>
                    <group>
                        <field name="arquivo" filename="name"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- PROCESSO SELETIVO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_processo_seletivo_tree_view">
            <field name="name">Processos Seletivos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.processo.seletivo</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_processo_seletivo_tree_view">
            <field name="name">ud.monitoria.processo.seletivo.tree</field>
            <field name="model">ud.monitoria.processo.seletivo</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Processos Seletivos" colors="blue:state=='andamento';red:state=='invalido'">
                    <field name="name"/>
                    <field name="data_inicio"/>
                    <field name="data_fim"/>
                    <field name="semestre_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_processo_seletivo_form_view">
            <field name="name">ud.monitoria.processo.seletivo.form</field>
            <field name="model">ud.monitoria.processo.seletivo</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Processo Seletivo" version="7.0">
                    <header>
                        <button name="%(action_ud_monitoria_inscricao_wizard_form_view)d" type="action"
                                string="Inscrever" states="andamento" class="oe_highlight"/>
                        <button name="%(ud_monitoria.action_ud_monitoria_minhas_inscricoes_tree_view)d" type="action"
                                string="Minhas Inscrições" states="novo,andamento,encerrado"/>
                        <field name="state" widget="statusbar" states="novo,andamento,encerrado"/>
                    </header>
                    <div attrs="{'invisible': [('state', '!=', 'invalido')]}"
                         groups="ud_monitoria.group_ud_monitoria_coordenador,ud_monitoria.group_ud_monitoria_administrador">
                        <h3>O processo seletivo torna-se inválido quando:</h3>
                        <ol>
                            <li>O registro do semestre do processo seletivo tenha sido marcado como inativo enquanto sua
                                data final não passou da atual;
                            </li>
                            <li>Não possui anexos ou disciplinas.</li>
                        </ol>
                    </div>
                    <group col="4">
                        <field name="name" colspan="4" placeholder="Nome do Processo Seletivo"
                               attrs="{'readonly': [('inscricoes_ids', '!=', [])]}"/>
                        <field name="data_inicio" colspan="2" attrs="{'readonly': [('inscricoes_ids', '!=', [])]}"/>
                        <field name="data_fim" colspan="2"/>
                        <field name="semestre_id" colspan="2" options="{'no_open': 1}"
                               on_change="onchange_semestre(semestre_id,disciplinas_ids)"
                               attrs="{'readonly': [('inscricoes_ids', '!=', [])]}"/>
                        <field name="valor_bolsa" colspan="2" attrs="{'readonly': [('inscricoes_ids', '!=', [])]}"/>
                    </group>
                    <group col="4"
                           attrs="{'invisible': ['|', ('name', '=', False), '|', ('data_inicio', '=', False), '|', ('data_fim', '=', False), ('semestre_id', '=', False)]}">
                        <group string="Disciplinas" colspan="4">
                            <field name="disciplinas_ids" nolabel="1"
                                   attrs="{'readonly': [('inscricoes_ids', '!=', [])]}"/>
                        </group>
                        <group string="Anexos" col="4" colspan="4">
                            <field name="anexos_ids" nolabel="1"/>
                        </group>
                        <group string="Critérios Avaliativos" colspan="4">
                            <field name="criterios_avaliativos_ids" nolabel="1" attrs="{'readonly': [('inscricoes_ids', '!=', [])]}"/>
                        </group>
                        <group string="Inscrições" colspan="4" invisible="1">
                            <field name="inscricoes_ids" nolabel="1">
                                <tree>
                                    <field name="matricula"/>
                                    <field name="discente_id"/>
                                    <field name="modalidade"/>
                                    <field name="bolsista"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </group>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_processo_seletivo_coordenador_form_view">
            <field name="name">ud.monitoria.processo.seletivo.coordenandor.form</field>
            <field name="model">ud.monitoria.processo.seletivo</field>
            <field name="inherit_id" ref="ud_monitoria_processo_seletivo_form_view"/>
            <field name="groups_id" eval="[(6, 0, [ref('ud_monitoria.group_ud_monitoria_coordenador')]), (6, 0, [ref('ud_monitoria.group_ud_monitoria_administrador')])]"/>
            <field name="arch" type="xml">
                <field name="state" position="attributes">
                    <attribute name="states">invalido,novo,andamento,encerrado</attribute>
                </field>
            </field>
        </record>

        <!-- PROCESSO SELETIVO: INSCRIÇÃO -->
        <record model="ir.actions.act_window" id="action_ud_monitoria_inscricao_tree_view">
            <field name="name">Inscritos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud.monitoria.inscricao</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_inscricao_tree_view">
            <field name="name">ud.monitoria.inscricao.tree</field>
            <field name="model">ud.monitoria.inscricao</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Inscrições" create="false" colors="blue:state=='analise'">
                    <field name="matricula"/>
                    <field name="discente_id"/>
                    <field name="processo_seletivo_id"/>
                    <field name="modalidade"/>
                    <field name="bolsista"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ud_monitoria_inscricao_form_view">
            <field name="name">ud.monitoria.inscricao.form</field>
            <field name="model">ud.monitoria.inscricao</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Inscrição" create="false" version="7.0">
                    <field name="cpf_nome" invisible="1"/>
                    <field name="identidade_nome" invisible="1"/>
                    <field name="hist_analitico_nome" invisible="1"/>
                    <header>
                        <field name="state" widget="statusbar" states="analise,concluido"/>
                    </header>
                    <group string="Dados Pessoais" col="4">
                        <field name="matricula" on_change="onchange_matricula(matricula,bolsista)" readonly="1"
                               colspan="2"/>
                        <field name="curso_id" colspan="2"/>
                        <field name="discente_id" readonly="1" colspan="2"
                               context="{'form_view_ref': 'ud_monitoria.ud_employee_info_basicas_form_view'}"/>
                        <field name="cpf" readonly="1" colspan="2" filename="cpf_nome"/>
                        <field name="identidade" readonly="1" colspan="2" filename="identidade_nome"/>
                        <field name="hist_analitico" readonly="1" colspan="2" filename="hist_analitico_nome"/>
                    </group>
                    <group string="Dados da Inscrição" col="4">
                        <field name="processo_seletivo_id" readonly="1"/>
                        <field name="modalidade" readonly="1"/>
                        <field name="turno" readonly="1"/>
                        <field name="bolsista" readonly="1"/>
                        <field name="disciplinas_ids" readonly="1" widget="many2many_tags"/>
                        <field name="dados_bancarios_id" readonly="1"
                               attrs="{'invisible': [('bolsista', '=', False)],'required': [('bolsista', '=', True)]}"/>
                    </group>
                    <group string="Pontuações">
                        <field name="pontuacoes_ids" nolabel="1" on_change="onchange_pontuacoes(pontuacoes_ids, context)"
                               options="{'reload_on_button': true}"/>
                    </group>
                    <group string="Informações Adicionais" attrs="{'invisible': [('info', '=', False)]}">
                        <field name="info" nolabel="1" placeholder="Informações complementares"/>
                    </group>
                </form>
            </field>
        </record>
    </data>
</openerp>
